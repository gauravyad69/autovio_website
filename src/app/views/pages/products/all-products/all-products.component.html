<!-- Carousel Section -->
<section class="carousel-section">
  <div class="carousel-container">
    <!-- Add debug info -->
    <div *ngIf="!carrousels.length">No carousel items loaded</div>
    
    <owl-carousel-o [options]="customOptions">
      <ng-template carouselSlide *ngFor="let slide of carrousels">
        <div class="carousel-image-container">
          <img [src]="slide.imageUrl" [alt]="'Carousel image ' + slide.carrouselId">
        </div>
      </ng-template>
    </owl-carousel-o>
  </div>
</section>

<!-- Categories Section -->
<section class="categories-section">
  <div class="categories-header">
    <h2>Shop by Category</h2>
  </div>
  <div class="categories-container">
    <!-- Add debug info -->
    <div *ngIf="!categories.length">No categories loaded</div>
    
    <owl-carousel-o [options]="categoryOptions">
      <ng-template carouselSlide *ngFor="let category of categories">
        <div class="category-card" (click)="onCategoryClick(category.categoryId)">
          <div class="category-image">
            <img [src]="category.categoryImage" [alt]="category.categoryName">
          </div>
          <h3 class="category-name">{{ category.categoryName }}</h3>
        </div>
      </ng-template>
    </owl-carousel-o>
  </div>
</section>

<section class="products-container">
  <div class="products-header">
    <h1 class="products-title">Our Products</h1>
    <div class="filter-container">
      <label for="filterSelect">Sort by:</label>
      <select
        id="filterSelect"
        class="filter-select"
        [(ngModel)]="filterValue">
        <option value="Default">Default</option>
        <option value="Low to High">Price: Low to High</option>
        <option value="High to Low">Price: High to Low</option>
        <option value="A to Z">A to Z</option>
        <option value="Z to A">Z to A</option>
      </select>
    </div>
  </div>

  <div class="products-grid"
       infiniteScroll
       [infiniteScrollDistance]="scrollDistance"
       [infiniteScrollUpDistance]="scrollUpDistance"
       [infiniteScrollThrottle]="throttle"
       (scrolled)="onScroll()">

    <ng-container *ngFor="let product of products | filter : filterValue : 'Default'">
      <app-product
        [product]="product"
        (addToCart)="addProductToCart($event)"
        (addToWishlist)="addProductToWishList($event.product, $event.event)">
      </app-product>
    </ng-container>
  </div>

  <!-- Loading State -->
  <div class="loading-grid" *ngIf="isLoading">
    <div class="loading-item" *ngFor="let i of [1,2,3,4,5,6,7,8]">
      <ngx-skeleton-loader
        [theme]="{
          'border-radius': '8px',
          height: '200px',
          'margin-bottom': '10px'
        }">
      </ngx-skeleton-loader>
      <ngx-skeleton-loader
        [theme]="{
          'border-radius': '4px',
          height: '20px',
          width: '70%',
          'margin-bottom': '8px'
        }">
      </ngx-skeleton-loader>
      <ngx-skeleton-loader
        [theme]="{
          'border-radius': '4px',
          height: '20px',
          width: '40%'
        }">
      </ngx-skeleton-loader>
    </div>
  </div>

  <!-- No More Data Message -->
  <div class="no-more-data" *ngIf="!hasMoreData && !isLoading">
    <p>No more products to load</p>
  </div>
</section>
