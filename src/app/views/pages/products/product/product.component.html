<div class="product">
    <div class="product-image">
        <a [routerLink]="['/products', product?.basic?.productId ?? '']">
            <img [ngSrc]="product?.details?.features!!.images[0]?.url ?? 'assets/images/ImageNotFound.png'"
                 [alt]="product?.basic?.productName ?? 'Product image'"
                 width="300" height="300"
                 priority
                 (error)="onImageError($event)">
        </a>
        
        @if (product?.basic?.pricing?.isOnSale) {
            <p class="product-sale">Sale</p>
        }
        
        <button type="button" class="btn-favourite"
                [class.is-favourite]="productInWishList(product)"
                (click)="addProductToWishList(product, $event)">
            <i class="fa-solid fa-heart"></i>
        </button>
    </div>
    
    <div class="product-content">
        <a class="product-name" [routerLink]="['/products', product?.basic?.productId ?? '']">
            {{ product?.basic?.productName }}
            @if (product?.basic?.categoryId) {
                <span class="badge bg-warning">{{ product.basic.categoryId }}</span>
            }
        </a>
        
        <div class="price-wrap">
            <span class="price">
                {{ product?.basic?.pricing?.regularPrice?.amount | currency:"NPR" }}
            </span>
            @if (product?.basic?.pricing?.salePrice) {
                <span class="price-old">
                    {{ product?.basic?.pricing?.salePrice?.amount | currency:"NPR" }}
                </span>
            }
        </div>
    </div>
</div>