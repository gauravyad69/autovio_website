<div class="product-card">
  <div class="product-image">
    <a [routerLink]="['/products', product?.basic?.productId]">
      <img [src]="product?.basic?.inventory?.mainImage" [alt]="product?.basic?.productName">
    </a>

    <!-- Sale Badge -->
    <div class="product-sale" *ngIf="product?.basic?.pricing?.isOnSale">
      -{{ calculateDiscount(
        product?.basic?.pricing?.regularPrice?.amount!,
        product?.basic?.pricing?.salePrice?.amount!
      ) }}%
    </div>

    <!-- Wishlist Button -->
    <button
      class="btn-favourite"
      (click)="onAddToWishlist($event)"
      [class.is-favourite]="isInWishlist">
      <i class="fas fa-heart"></i>
    </button>
  </div>

  <div class="product-content">
    <a [routerLink]="['/products', product?.basic?.productId]" class="product-name">
      {{ product?.basic?.productName }}
    </a>

    <div class="product-price">
      <span class="current-price">
        {{ product?.basic?.pricing?.isOnSale ?
           product?.basic?.pricing?.salePrice?.amount :
           product?.basic?.pricing?.regularPrice?.amount | nprCurrency }}
      </span>
      <span class="original-price" *ngIf="product?.basic?.pricing?.isOnSale">
        {{ product?.basic?.pricing?.regularPrice?.amount | nprCurrency }}
      </span>
    </div>

    <div class="product-actions">
      <button
        class="add-to-cart"
        (click)="onAddToCart()">
        <i class="fas fa-shopping-cart"></i>
        <span>Add to Cart</span>
      </button>
    </div>
  </div>
</div>
